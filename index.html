<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Universo Animado</title>
  <style>
    html, body { margin:0; padding:0; overflow:hidden; background:black; }
    canvas { display:block; }
  </style>
</head>
<body>
<canvas id="universo"></canvas>

<script>
const canvas = document.getElementById("universo");
const ctx = canvas.getContext("2d");
let width = canvas.width = window.innerWidth;
let height = canvas.height = window.innerHeight;

let nombre = "GERAL TQM MOCOSA SUCIA";

// === Estrellas de fondo ===
let estrellas = [];
function crearEstrellas() {
  estrellas = Array.from({length:1200}, () => ({
    x: Math.random()*width,
    y: Math.random()*height,
    r: Math.random()*1.5 + 0.5
  }));
}
crearEstrellas();

// === Cargar imÃ¡genes locales con fallback ===
function loadImage(src, fallbackColor = "#888") {
  return new Promise(resolve => {
    const img = new Image();
    img.src = src;
    img.onload = () => resolve(img);
    img.onerror = () => {
      const c = document.createElement("canvas");
      c.width = c.height = 32;
      const ct = c.getContext("2d");
      ct.fillStyle = fallbackColor;
      ct.beginPath();
      ct.arc(16,16,16,0,Math.PI*2);
      ct.fill();
      resolve(c);
    };
  });
}

// === Planetas y lunas ===
let planetas = [];
let lunaImg;

Promise.all([
  loadImage("img/marte.jpg", "#c1440e"),
  loadImage("img/tierra.jpg", "#2e6db4"),
  loadImage("img/jupiter.jpg", "#e2b07f"),
  loadImage("img/saturno.jpg", "#e7d8a1"),
  loadImage("img/luna.jpg", "#bbb")
]).then(images => {
  planetas = [
    {radio:140, tam:30, vel:0.01, ang:Math.random()*Math.PI*2, img:images[0], lunas:1},
    {radio:240, tam:40, vel:0.008, ang:Math.random()*Math.PI*2, img:images[1], lunas:1},
    {radio:380, tam:65, vel:0.006, ang:Math.random()*Math.PI*2, img:images[2], lunas:2},
    {radio:540, tam:75, vel:0.004, ang:Math.random()*Math.PI*2, img:images[3], lunas:3}
  ];
  lunaImg = images[4];

  requestAnimationFrame(dibujar);
});

// === Dibujar universo ===
function dibujar(t){
  ctx.clearRect(0,0,width,height);

  // Fondo nebulosa
  const grad = ctx.createRadialGradient(width/2,height/2,100,width/2,height/2,width);
  grad.addColorStop(0,"#0B1B3A");
  grad.addColorStop(1,"#000010");
  ctx.fillStyle = grad;
  ctx.fillRect(0,0,width,height);

  // Estrellas
  ctx.fillStyle = "white";
  estrellas.forEach(e=>{
    const brillo = Math.sin(t*0.002 + e.x) *0.5 +0.5;
    ctx.globalAlpha = 0.3 + brillo*0.7;
    ctx.beginPath();
    ctx.arc(e.x,e.y,e.r,0,Math.PI*2);
    ctx.fill();
  });
  ctx.globalAlpha=1;

  // Estrella central con nombre
  const cx = width/2;
  const cy = height/2;
  const pulso = 1 + Math.sin(t*0.003)*0.1;
  const radio = 120*pulso;

  const halo = ctx.createRadialGradient(cx,cy,0,cx,cy,radio);
  halo.addColorStop(0,"rgba(255,230,150,0.9)");
  halo.addColorStop(0.5,"rgba(255,230,150,0.3)");
  halo.addColorStop(1,"rgba(255,230,150,0)");
  ctx.fillStyle = halo;
  ctx.beginPath();
  ctx.arc(cx,cy,radio,0,Math.PI*2);
  ctx.fill();

  ctx.font = "bold 80px Arial";
  ctx.textAlign="center";
  ctx.textBaseline="middle";
  ctx.shadowColor="white";
  ctx.shadowBlur=50;
  ctx.fillStyle="white";
  ctx.fillText(nombre,cx,cy);
  ctx.shadowBlur=0;

  // Planetas y lunas
  planetas.forEach(p=>{
    ctx.beginPath();
    ctx.strokeStyle="rgba(255,255,255,0.1)";
    ctx.arc(cx,cy,p.radio,0,Math.PI*2);
    ctx.stroke();

    p.ang += p.vel;
    const px = cx + Math.cos(p.ang)*p.radio;
    const py = cy + Math.sin(p.ang)*p.radio;

    ctx.save();
    ctx.beginPath();
    ctx.arc(px,py,p.tam,0,Math.PI*2);
    ctx.clip();
    ctx.drawImage(p.img,px-p.tam,py-p.tam,p.tam*2,p.tam*2);
    ctx.restore();

    for(let i=0;i<p.lunas;i++){
      const angLuna = t*0.004*(i+1) + p.ang*2;
      const distLuna = p.tam*2 + i*18;
      const lx = px + Math.cos(angLuna)*distLuna;
      const ly = py + Math.sin(angLuna)*distLuna;
      ctx.save();
      ctx.beginPath();
      ctx.arc(lx,ly,6,0,Math.PI*2);
      ctx.clip();
      ctx.drawImage(lunaImg,lx-6,ly-6,12,12);
      ctx.restore();
    }
  });

  requestAnimationFrame(dibujar);
}

// Redimensionar canvas
window.addEventListener("resize", ()=>{
  width = canvas.width = window.innerWidth;
  height = canvas.height = window.innerHeight;
  crearEstrellas();
});
</script>

</body>
</html>
